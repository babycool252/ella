{%- liquid
  assign collection = section.settings.collection
  assign limit = section.settings.product_limit
  assign title = section.settings.title
  assign subtitle = section.settings.subtitle
  assign show_arrows = section.settings.show_arrows
  assign show_dots = section.settings.show_dots
  assign autoplay = section.settings.autoplay
  assign autoplay_speed = section.settings.autoplay_speed
  assign bg_color = section.settings.bg_color
  assign text_color = section.settings.text_color
  assign accent_color = section.settings.accent_color
-%}

<link rel="stylesheet" href="{{ 'component-new-arrivals-jewelry.css' | asset_url }}" media="print" onload="this.media='all'">
<noscript>{{ 'component-new-arrivals-jewelry.css' | asset_url | stylesheet_tag }}</noscript>
<script data-loader-script="{{ 'new-arrivals-jewelry.js' | asset_url }}"></script>

<div class="new-arrivals-jewelry section-block-{{section.id}}" 
     style="--bg-color: {{ bg_color }}; --text-color: {{ text_color }}; --accent-color: {{ accent_color }};">
  
  <div class="container">
    <!-- 标题区域 -->
    <div class="section-header">
      {%- if title != blank -%}
        <h2 class="section-title">{{ title }}</h2>
      {%- endif -%}
      {%- if subtitle != blank -%}
        <p class="section-subtitle">{{ subtitle }}</p>
      {%- endif -%}
    </div>

    <!-- 产品轮播区域 -->
    <div class="products-carousel-wrapper">
      <div class="products-carousel" 
           data-autoplay="{{ autoplay }}"
           data-autoplay-speed="{{ autoplay_speed }}"
           data-show-arrows="{{ show_arrows }}"
           data-show-dots="{{ show_dots }}">
        
        {%- if collection != blank and collections[collection].products.size > 0 -%}
          {%- for product in collections[collection].products limit: limit -%}
            <div class="product-item">
              <div class="product-card">
                <!-- 产品图片 -->
                <div class="product-image-wrapper">
                  <a href="{{ product.url }}" class="product-link">
                    {%- if product.featured_image -%}
                      <img src="{{ product.featured_image | img_url: '600x600', crop: 'center' }}"
                           alt="{{ product.featured_image.alt | default: product.title }}"
                           class="product-image"
                           loading="lazy"
                           width="600"
                           height="600">
                    {%- else -%}
                      <div class="product-image-placeholder">
                        <svg width="200" height="200" viewBox="0 0 200 200" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <rect width="200" height="200" fill="#f8f8f8"/>
                          <path d="M100 80C88.9543 80 80 88.9543 80 100C80 111.046 88.9543 120 100 120C111.046 120 120 111.046 120 100C120 88.9543 111.046 80 100 80ZM100 110C94.4772 110 90 105.523 90 100C90 94.4772 94.4772 90 100 90C105.523 90 110 94.4772 110 100C110 105.523 105.523 110 100 110Z" fill="#ddd"/>
                        </svg>
                      </div>
                    {%- endif -%}
                    
                    <!-- 悬停效果 -->
                    <div class="product-hover-overlay">
                      <div class="hover-content">
                        <span class="view-details">View Details</span>
                      </div>
                    </div>
                  </a>
                  
                  <!-- 产品标签 -->
                  {%- if product.tags contains 'new' -%}
                    <div class="product-badge new-badge">New</div>
                  {%- endif -%}
                  {%- if product.compare_at_price > product.price -%}
                    <div class="product-badge sale-badge">Sale</div>
                  {%- endif -%}
                  
                  <!-- 悬停显示的产品标题 -->
                  <div class="product-title-overlay">
                    <h3 class="product-title">
                      <a href="{{ product.url }}">{{ product.title }}</a>
                    </h3>
                  </div>
                </div>
              </div>
            </div>
          {%- endfor -%}
        {%- else -%}
          <!-- 示例产品 -->
          {%- for i in (1..3) -%}
            <div class="product-item">
              <div class="product-card">
                <div class="product-image-wrapper">
                  <div class="product-image-placeholder">
                    <svg width="200" height="200" viewBox="0 0 200 200" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <rect width="200" height="200" fill="#f8f8f8"/>
                      <path d="M100 80C88.9543 80 80 88.9543 80 100C80 111.046 88.9543 120 100 120C111.046 120 120 111.046 120 100C120 88.9543 111.046 80 100 80ZM100 110C94.4772 110 90 105.523 90 100C90 94.4772 94.4772 90 100 90C105.523 90 110 94.4772 110 100C110 105.523 105.523 110 100 110Z" fill="#ddd"/>
                    </svg>
                  </div>
                  
                  <!-- 悬停显示的产品标题 -->
                  <div class="product-title-overlay">
                    <h3 class="product-title">
                      <a href="#">Sample Jewelry Item {{ i }}</a>
                    </h3>
                  </div>
                </div>
              </div>
            </div>
          {%- endfor -%}
        {%- endif -%}
      </div>

      <!-- 导航箭头 -->
      {%- if show_arrows -%}
        <button class="carousel-arrow carousel-prev" aria-label="Previous products">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M15 18l-6-6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
        <button class="carousel-arrow carousel-next" aria-label="Next products">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M9 18l6-6-6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
      {%- endif -%}
    </div>

    <!-- 轮播指示点 -->
    {%- if show_dots -%}
      <div class="carousel-dots"></div>
    {%- endif -%}
  </div>
</div>

<style>
  .new-arrivals-jewelry.section-block-{{section.id}} {
    margin-top: {{ section.settings.mg_top_desktop }}px;
    margin-bottom: {{ section.settings.mg_bottom_desktop }}px;
  }

  @media (max-width: 1199px) {
    .new-arrivals-jewelry.section-block-{{section.id}} {
      margin-top: {{ section.settings.mg_top_tablet }}px;
      margin-bottom: {{ section.settings.mg_bottom_tablet }}px;
    }
  }

  @media (max-width: 767px) {
    .new-arrivals-jewelry.section-block-{{section.id}} {
      margin-top: {{ section.settings.mg_top_mobile }}px;
      margin-bottom: {{ section.settings.mg_bottom_mobile }}px;
    }
  }
</style>

{% schema %}
{
  "name": "New Arrivals Jewelry",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Section Title",
      "default": "New Arrivals"
    },
    {
      "type": "text",
      "id": "subtitle",
      "label": "Section Subtitle",
      "default": "Discover our latest jewelry collection"
    },
    {
      "type": "collection",
      "id": "collection",
      "label": "Collection"
    },
    {
      "type": "range",
      "id": "product_limit",
      "label": "Number of Products",
      "min": 3,
      "max": 12,
      "step": 1,
      "default": 6
    },
    {
      "type": "header",
      "content": "Carousel Settings"
    },
    {
      "type": "checkbox",
      "id": "show_arrows",
      "label": "Show Navigation Arrows",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_dots",
      "label": "Show Dots Indicator",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "autoplay",
      "label": "Enable Autoplay",
      "default": false
    },
    {
      "type": "range",
      "id": "autoplay_speed",
      "label": "Autoplay Speed (seconds)",
      "min": 2,
      "max": 10,
      "step": 1,
      "default": 5
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color",
      "id": "bg_color",
      "label": "Background Color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text Color",
      "default": "#333333"
    },
    {
      "type": "color",
      "id": "accent_color",
      "label": "Accent Color",
      "default": "#d4af37"
    },
    {
      "type": "header",
      "content": "Spacing"
    },
    {
      "type": "range",
      "id": "mg_top_desktop",
      "label": "Desktop Top Margin",
      "min": 0,
      "max": 100,
      "step": 5,
      "default": 80
    },
    {
      "type": "range",
      "id": "mg_bottom_desktop",
      "label": "Desktop Bottom Margin",
      "min": 0,
      "max": 100,
      "step": 5,
      "default": 80
    },
    {
      "type": "range",
      "id": "mg_top_tablet",
      "label": "Tablet Top Margin",
      "min": 0,
      "max": 100,
      "step": 5,
      "default": 60
    },
    {
      "type": "range",
      "id": "mg_bottom_tablet",
      "label": "Tablet Bottom Margin",
      "min": 0,
      "max": 100,
      "step": 5,
      "default": 60
    },
    {
      "type": "range",
      "id": "mg_top_mobile",
      "label": "Mobile Top Margin",
      "min": 0,
      "max": 100,
      "step": 5,
      "default": 40
    },
    {
      "type": "range",
      "id": "mg_bottom_mobile",
      "label": "Mobile Bottom Margin",
      "min": 0,
      "max": 100,
      "step": 5,
      "default": 40
    }
  ],
  "presets": [
    {
      "name": "New Arrivals Jewelry"
    }
  ]
}
{% endschema %} 